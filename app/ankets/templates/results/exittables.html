{% extends 'results/base_results.html' %}


{% block respondent %}{{respondent_name}}{% endblock %}

{% block content %}

{% if user.is_authenticated %}

{% load mathfilters %}

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
<div class="container sections-wrapper">
    <div class="row">
        <div class="primary col-md-8 col-sm-12 col-xs-12">
            <section class="about section">
                <div class="section-inner">
                    <h2 class="heading">{{region_name}}</h2>
                    <div class="content">
                        {% if respondent_strtype != 'employers' %}
                            <div style="padding-bottom:30px;padding-top:30px;">
                                <p>Распределение выпускников по каналам занятости и регионам регистрации</p>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="chart-container" style="width: 300px;">
                                          <canvas id="myChart_employment" width="150" height="150"></canvas>
                                        </div>
                                    </div>
                                    <!--<div class="col-md-6">-->
                                        <!--<div class="chart-container" style="width: 300px;">-->
                                          <!--<canvas id="myChart_employment_regions" width="150" height="150"></canvas>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                </div>
                             </div>

                        {% endif %}
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<style>
table th {
   text-align: center;
   border: 1px solid black !important;
   font-weight: normal !important;
}

table td {
   text-align: center;
   border: 1px solid black !important;
}

.table {
   margin: auto;
   width: 50% !important;
   font-size: 0.7rem !important;
}
</style>

{% load static %}
<script>

var ctx = document.getElementById('myChart_employment').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'doughnut', //doughnut
    data: {
        labels: {{raw_employment.labels|safe}},
        datasets: [
                {
                    label: 'Распределение выпускников по каналам занятости',
                    data: {{raw_employment.data|safe}},
                    backgroundColor: ["rgba(100, 700, 100, 0.7)", "rgba(700, 100, 100, 0.7)", "rgba(100, 100, 700, 0.7)", "rgba(500, 100, 300, 0.7)", "rgba(300, 700, 200, 0.7)"],
                },
        ]
    },
        options: {
            tooltips: {
                titleFontSize: 9,
                bodyFontSize: 9
            },
            legend: {
                position: 'bottom',
                display: false,
                labels: {
                    "fontSize": 8,
                }
            }
        }
});

</script>

{% else %}
<div class="container">
    <div class="alert alert-danger" role="alert">
      Вы не авторизованы, для просмотра страницы требуется <a href="{% url 'login' %}" class="alert-link">авторизация</a>.
    </div>
</div>
{% endif %}



{% endblock %}



                            <!--<table class="table table-sm">-->
                                <!--<thead>-->
                                    <!--<tr>-->
                                        <!--<th colspan="1" rowspan="2" scope="col"></th>-->
                                        <!--<th colspan="1" rowspan="2" scope="col">Всего, чел.</th>-->
                                        <!--<th colspan="8" rowspan="1" scope="col">Трудоустроены, чел.</th>-->
                                        <!--<th colspan="2" rowspan="1" scope="col">Трудоустроены из гр.2, чел.</th>-->
                                        <!--<th colspan="1" rowspan="2" scope="col">Продолжили обучение в проф. обр. организациях</th>-->
                                        <!--<th colspan="1" rowspan="2" scope="col">Призваны в ряды Вооруженных Сил Российской Федерации</th>-->
                                        <!--<th colspan="1" rowspan="2" scope="col">Находятся в отпуске по уходу за ребенком</th>-->
                                        <!--<th colspan="1" rowspan="2" scope="col">Не трудоустроены (в т. ч. находятся на учете в службе занятости в качестве безработных)</th>-->
                                    <!--</tr>-->
                                    <!--<tr>-->
                                        <!--<th scope="col">Всего</th>-->
                                        <!--<th scope="col">из них по профессии/специальности</th>-->
                                        <!--<th scope="col">По найму</th>-->
                                        <!--<th scope="col">из них по профессии/специальности</th>-->
                                        <!--<th scope="col">ИП</th>-->
                                        <!--<th scope="col">из них по профессии/специальности</th>-->
                                        <!--<th scope="col">Самозанятые</th>-->
                                        <!--<th scope="col">из них по профессии/специальности</th>-->
                                        <!--<th scope="col">в регионах с постоянной регистрацией</th>-->
                                        <!--<th scope="col">в регионах, не связанных с местом постоянной регистрации</th>-->
                                    <!--</tr>-->
                                    <!--<tr>-->
                                        <!--<th scope="col">А</th>-->
                                        <!--<th scope="col">1</th>-->
                                        <!--<th scope="col">2</th>-->
                                        <!--<th scope="col">3</th>-->
                                        <!--<th scope="col">4</th>-->
                                        <!--<th scope="col">5</th>-->
                                        <!--<th scope="col">6</th>-->
                                        <!--<th scope="col">7</th>-->
                                        <!--<th scope="col">8</th>-->
                                        <!--<th scope="col">9</th>-->
                                        <!--<th scope="col">10</th>-->
                                        <!--<th scope="col">11</th>-->
                                        <!--<th scope="col">12</th>-->
                                        <!--<th scope="col">13</th>-->
                                        <!--<th scope="col">14</th>-->
                                        <!--<th scope="col">15</th>-->
                                    <!--</tr>-->
                                <!--</thead>-->
                                <!--<tbody>-->
                                        <!--{% for value in results %}-->
                                            <!--<tr>-->
                                                <!--{% for v in value %}-->
                                                    <!--{% if forloop.counter == 1 %}-->
                                                        <!--<td class="text-left">{{v}}</td>-->
                                                    <!--{% else %}-->
                                                        <!--<td>{{v}}</td>-->
                                                    <!--{% endif %}-->
                                                <!--{% endfor %}-->
                                            <!--</tr>-->
                                        <!--{% endfor %}-->
                                <!--</tbody>-->
                            <!--</table>-->